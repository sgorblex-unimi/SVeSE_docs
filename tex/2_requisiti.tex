%% Copyright (C) 2022 Alessandro "Sgorblex" Clerici Lorenzini and Edoardo "Miniman" Della Rossa
%
% This work may be distributed and/or modified under the
% conditions of the LaTeX Project Public License, either version 1.3
% of this license or (at your option) any later version.
% The latest version of this license is in
%   http://www.latex-project.org/lppl.txt
% and version 1.3 or later is part of all distributions of LaTeX
% version 2005/12/01 or later.
%
% This work has the LPPL maintenance status `maintained'.
%
% The Current Maintainer of this work is Alessandro Clerici Lorenzini
%
% This work consists of the files listed in work.txt


\chapter{Specifica e analisi dei requisiti}

\section{Requisiti funzionali}\label{reqfunz}


\subsection{Votanti}
Ogni elettore deve poter esercitare il suo diritto al voto, ossia diventare votante. La possibilità di votare deve essere garantita dal Sistema sia di persona in un Seggio Fisico, sia da remoto via Internet.

Il votante che decida di votare on-line accede all'interfaccia del sistema tramite un portale pubblicizzato opportunamente dagli enti ufficiali. L'interfaccia offre innanzitutto una schermata di autenticazione. Il votante autenticato, a meno che abbia già votato, accede alle schede elettorali della consultazione corrente e le compila secondo le modalità previste dalle elezioni. Il votante conferma (o annulla) una schermata riassuntiva della sua scelta, quindi riceve una conferma di avvenuto suffragio, la quale non contiene la prova del relativo contenuto.

Il votante che decida di votare di persona in un Seggio Fisico si reca nel seggio assegnatogli dalle normative vigenti, quindi viene identificato (dopo eventuali verifiche preliminari di accettazione) dal Responsabile di Seggio. Quest'ultimo indica al votante la postazione da cui effettuare il suffragio, che avviene in modalità del tutto analoghe a quelle on-line, ad eccezione della procedura di autenticazione, che è appunto sostituita da quella fisica.


\subsection{Amministratore della Sessione di Voto}
L'Amministratore della Sessione di Voto si occupa di aggiungere i Garanti (predeterminati con meccanismi esterni al Sistema) e di costruire le schede elettorali previste per la consultazione. L'amministratore inserisce inoltre nel sistema i dettagli sulla Sessione di Voto, tra cui la sua durata o la sua scadenza. Tale caratteristica temporale è gestita dal Sistema in modo automatico, che conclude la Sessione quando opportuno.

Una volta ricevuta la verifica da parte dei Garanti, il Sistema può dare il via alla Sessione di Voto, durante la quale gli elettori possono esprimere i rispettivi suffragi.

L'amministratore ha la facoltà di sospendere la Sessione qualora una situazione eccezionale lo richieda. Eventuali richieste di sospensione sono inviate all'Amministratore dai Responsabili di Seggio. Durante una sospensione l'Amministratore ha facoltà di terminare definitivamente la Sessione, tuttavia tale procedimento è da intendersi eccezionale.


\subsection{Garanti}
I Garanti si occupano di assicurare che l'amministrazione elettorale sia corretta e trasparente.

Prima dell'inizio della Sessione i Garanti hanno il compito di verificare che l'Amministratore abbia impostato correttamente i parametri della Sessione di Voto e che le nomine dei Garanti siano coerenti con quanto stabilito dai regolamenti.

Alla fine della sessione i Garanti hanno il diritto di consultare i risultati per verificarne la proclamazione, e hanno libero accesso ai dati di monitoraggio al fine di garantire che non ci siano stati malfunzionamenti.


\subsection{Responsabile di Seggio}
Il responsabile di Seggio si occupa di gestire le consultazioni in presenza. 

All'inizio della sessione di voto il Responsabile di Seggio si autentica presso la macchina della propria postazione, dalla quale è in grado di monitorare la situazione all'interno del Seggio.

Durante la Sessione, il Responsabile di Seggio identifica i votanti e abilita le postazioni di voto per permettere ad essi di esprimere il proprio suffragio senza dover ripetere l'autenticazione.

Il Responsabile di Seggio verifica che ogni votante abbia confermato ed inviato la scheda prima di abbandonare il seggio.

Qualora situazioni eccezionali, ad esempio di minaccia alla sicurezza, dovessero presentarsi, il Responsabile di Seggio ha la facoltà di notificare l'Amministratore della Sessione di Voto e richiedere eventualmente la sospensione della consultazione presso il proprio Seggio Fisico. Solo l'amministratore può confermare tale sospensione.


\subsection{Risultati}
I risultati sono calcolati automaticamente dal Sistema previa chiusura della Sessione di Voto secondo le modalità previste dalle elezioni e sono consultabili dall'Amministratore e dai Garanti.

I risultati contengono il nome dei vincitori, il conteggio dei voti per candidato o gruppo e dati in forma aggregata in funzione dell'area geografica (basata sul seggio assegnato) e dello stato fisico o on-line dei suffragi. Sono anche presenti dati sull'affluenza alla consultazione.



\subsection{Modalità di voto}
Le seguenti modalità di voto devono essere disponibili durante la creazione della scheda:
\begin{description}
	\item[Voto ordinale] all'elettore è richiesto di ordinare le scelte (candidati o gruppi) presenti nella scheda in base alle proprie preferenze;
	\item[Voto categorico] l'elettore inserisce una preferenza per non più di una scelta (candidato o gruppo);
	\item[Voto categorico con preferenze] l'elettore inserisce una preferenza per un gruppo e ha la possibilità di indicare una o più preferenze tra le scelte del gruppo selezionato;
	\item[Referendum] consiste in una domanda fatta all'elettorato con la quale si chiede se si sia favorevoli o contrari a un determinato quesito.
\end{description}

In tutte le modalità deve essere garantita la possibilità di astenersi.


\subsection{Modalità di selezione del vincitore}
La selezione del vincitore può avvenire secondo diverse modalità, impostate dall'Amministratore conformemente all'elezione.
\begin{description}
	\item[maggioranza] il vincitore è il candidato che ha ottenuto il maggior numero di voti;
	\item[maggioranza assoluta] il vincitore è il candidato che ha ottenuto la maggioranza assoluta dei voti, cioè il 50\% + 1 dei voti espressi;
	\item[referendum senza quorum] si procede al conteggio dei voti indipendentemente se abbia partecipato o meno alla consultazione la maggioranza degli aventi diritto al voto; 
	\item[referendum con quorum] si procede al conteggio dei voti espressi solo nel caso in cui abbia partecipato alla consultazione la maggioranza degli aventi diritto al voto.
\end{description}


\subsection{User stories}

\subsubsection{Elettore}
Come elettore devo poter...
\begin{itemize}
	\item votare on-line;
	\item votare di persona (sapendo in che seggio).
\end{itemize}

\subsubsection{Votante}
Come votante devo poter...
\begin{itemize}
	\item contare sull'anonimia e segretezza del mio voto;
	\item selezionare in modo facile le mie preferenze secondo la modalità di voto della/e scheda/e.
\end{itemize}

\subsubsection{Amministratore della Sessione di Voto}
Come Amministratore della Sessione di Voto devo poter...
\begin{itemize}
	\item aggiungere schede con le varie modalità e scelte per ogni scheda;
	\item avviare e fermare la Sessione di Voto (+ sospensioni);
	\item consultare i risultati delle elezioni.
\end{itemize}

\subsubsection{Garante}
Come Garante della Sessione di Voto devo poter...
\begin{itemize}
	\item verificare le schede e la lista dei garanti prima dell'avvio della Sessione di Voto;
	\item consultare i risultati delle elezioni.
\end{itemize}

\subsubsection{Responsabile di Seggio}
Come Responsabile di Seggio devo poter...
\begin{itemize}
	\item attivare, dopo l'identificazione, la postazione per i singoli votanti;
	\item verificare l'avvenuto voto di ciascun votante (senza ovviamente vederne il contenuto).
\end{itemize}

%\section{Requisiti di interfacce esterne}
%
%
%\subsection{Interfacce utente}
%
%
%\subsection{Interfacce hardware}
%
%
%\subsection{Interfacce di comunicazione}

\section{Requisiti non funzionali}

\subsection{Voto}

\subsubsection{Anonimato del voto}
In nessun modo deve essere possibile collegare un suffragio con l'identità che l'ha espresso.

\subsubsection{Segretezza del voto}
In nessun modo deve essere possibile collegare un elettore con il suffragio che ha espresso.

\subsubsection{Imparzialità del sistema}
Il Sistema non deve influenzare in alcun modo la decisione del votante.

\subsubsection{Unicità del voto}
Ogni elettore può votare una e una sola volta per scheda elettorale.

\subsubsection{Regole sull'espressione del voto}
\begin{enumerate}
	\item Il votante può accedere solo alle schede per le elezioni in cui gode dell'elettorato attivo;
	\item Il votante può esprimere solo un voto valido (eventualmente esprimendo più votazioni se le modalità lo richiedono) oppure può astenersi. Non è consentito esprimere un voto nullo;
	\item Il votante deve poter verificare tramite l'interfaccia grafica che il voto espresso sia coerente con la propria volontà (per evitare errori inconsapevoli), dopodiché poterlo confermare e ricevere un messaggio di avvenuto suffragio;
	\item Il Sistema non deve fornire alcuna prova del contenuto del suffragio dopo la conferma dello stesso, ai fini di evitare ogni possibile utilizzo illecito anche per conto terzi.
\end{enumerate}

\subsubsection{Raccolta dei voti}
Dopo l'espressione del singolo suffragio, il voto deve pervenire all'urna del sistema centrale senza alterazioni. Il conteggio avviene solo dopo la chiusura della Sessione di Voto.


\subsection{Attinenza alle specifiche ufficiali dello Stato}
Il Sistema deve essere conforme alle \textit{Linee guida per la sperimentazione di modalità di espressione del voto in via digitale} pubblicate dal Ministero dell'Interno il 25 maggio 2021.


%\subsection{Requisiti di prestazione}
%
%
%\subsection{Attributi di qualità del software}


\subsection{Requisiti di sicurezza}

\subsubsection{Autenticazione delle utenze di gestione}
Ogni utente di gestione, ovvero Amministratore, Garante o Responsabile di Seggio, deve autenticarsi presso il Sistema prima di accedervi, al fine di permettere l'implementazione di meccanismi efficaci di access control. 

Non ci sono vincoli sullo specifico metodo di autenticazione utilizzato: potranno essere utilizzati dei sistemi di identità digitale pubblici, così come un sistema utente/password opportunamente configurato.

\subsubsection{Autenticazione degli elettori}
Ai fini di garantire l'autenticità dei dati raccolti, è fondamentale che ogni elettore si identifichi. Il Sistema deve prevedere un sistema di autenticazione per consentire solamente agli elettori la possibilità di votare (e solo una volta).

On-line l'autenticazione avviene tramite un sistema analogo a quello per l'autenticazione delle utenze di gestione. Nei seggi fisici l'autenticazione avviene tramite la presentazione di un documento d'identità.

\subsubsection{Availability e malfunzionamenti}
Il Sistema deve essere sviluppato con un'attenzione particolare nei confronti della disponibilità. Se il Sistema ha un interruzione momentanea nel funzionamento, deve informare immediatamente il votante, e bloccare le procedure di voto, riprendendole successivamente nel caso dopo aver ripetuto la procedura di identificazione.

\subsubsection{Privacy}
Ogni informazione sensibile che che viene memorizzata deve essere trattata secondo le direttive e le norme vigenti. Sul dispositivo usato non deve comunque rimanere alcuna traccia del contenuto del suffragio espresso.

\subsubsection{Auditing}
Ai fini di mantenere il maggior livello di sicurezza possibile, opportuni sistemi di auditing (log) devono essere forniti, i quali non devono comunque contenere il contenuto dei suffragi.

